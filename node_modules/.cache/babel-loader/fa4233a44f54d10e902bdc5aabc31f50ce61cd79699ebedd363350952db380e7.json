{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import Modal from\"../components/Modal\";import AddCourse from\"./AddCourses\";import EditCourse from\"./EditCourse\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminCourses=()=>{const[courses,setCourses]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[isModalOpen,setModalOpen]=useState(false);const[editModalOpen,setEditModalOpen]=useState(false);// State for edit modal\nconst[selectedCourse,setSelectedCourse]=useState(null);// State for the selected course to edit\nconst fetchCourses=async()=>{try{setLoading(true);const response=await fetch(\"http://127.0.0.1:8000/courses/\");if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();// Flatten the grouped courses into a single array\nconst flattenedCourses=Object.entries(data).flatMap(_ref=>{let[_,courses]=_ref;return courses;});setCourses(flattenedCourses);}catch(err){setError(err.message);}finally{setLoading(false);}};useEffect(()=>{fetchCourses();},[]);const deleteCourse=async courseId=>{try{const response=await fetch(\"http://127.0.0.1:8000/courses/\".concat(courseId),{method:\"DELETE\"});if(!response.ok){throw new Error(\"Failed to delete course\");}setCourses(courses.filter(course=>course._id!==courseId));alert(\"Course deleted successfully.\");}catch(err){alert(\"Error: \".concat(err.message));}};const handleEditClick=course=>{setSelectedCourse(course);setEditModalOpen(true);};if(loading){return/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-lg text-blue-500\",children:\"Loading courses...\"});}if(error){return/*#__PURE__*/_jsxs(\"p\",{className:\"text-center text-lg text-red-500\",children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 space-y-6\",children:[isModalOpen&&/*#__PURE__*/_jsx(Modal,{onClose:()=>setModalOpen(false),children:/*#__PURE__*/_jsx(AddCourse,{setModalOpen:setModalOpen,fetchCourses:fetchCourses})}),editModalOpen&&selectedCourse&&/*#__PURE__*/_jsx(Modal,{onClose:()=>setEditModalOpen(false),children:/*#__PURE__*/_jsx(EditCourse,{course:selectedCourse,setModalOpen:setEditModalOpen,fetchCourses:fetchCourses})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-semibold text-center text-gray-800\",children:\"Admin - Manage Courses\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setModalOpen(true),className:\"bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 mb-6\",children:\"Add Course\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",children:courses.length>0?courses.map(course=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800\",children:course.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 mt-2\",children:course.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col space-y-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:course.courselink||\"#\",className:\"text-blue-500 hover:underline\",target:\"_blank\",rel:\"noopener noreferrer\",children:\"View Course\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[\"Standard: \",course.standard||\"N/A\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 mt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditClick(course),className:\"bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>deleteCourse(course._id),className:\"bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-red-700\",children:\"Delete\"})]})]})]},course._id)):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-lg text-gray-500\",children:\"No courses available\"})})]});};export default AdminCourses;","map":{"version":3,"names":["React","useState","useEffect","Modal","AddCourse","EditCourse","jsx","_jsx","jsxs","_jsxs","AdminCourses","courses","setCourses","loading","setLoading","error","setError","isModalOpen","setModalOpen","editModalOpen","setEditModalOpen","selectedCourse","setSelectedCourse","fetchCourses","response","fetch","ok","Error","concat","status","data","json","flattenedCourses","Object","entries","flatMap","_ref","_","err","message","deleteCourse","courseId","method","filter","course","_id","alert","handleEditClick","className","children","onClose","onClick","length","map","title","description","href","courselink","target","rel","standard"],"sources":["/Users/dineshgaikwad/Desktop/Tesla_Project_Data/Tesla_Frontend/src/admin/AdminCourses.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Modal from \"../components/Modal\";\nimport AddCourse from \"./AddCourses\";\nimport EditCourse from \"./EditCourse\";\n\nconst AdminCourses = () => {\n  const [courses, setCourses] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [isModalOpen, setModalOpen] = useState(false);\n  const [editModalOpen, setEditModalOpen] = useState(false); // State for edit modal\n  const [selectedCourse, setSelectedCourse] = useState(null); // State for the selected course to edit\n\n  const fetchCourses = async () => {\n    try {\n      setLoading(true);\n      const response = await fetch(\"http://127.0.0.1:8000/courses/\");\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const data = await response.json();\n\n      // Flatten the grouped courses into a single array\n      const flattenedCourses = Object.entries(data).flatMap(([_, courses]) => courses);\n      setCourses(flattenedCourses);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCourses();\n  }, []);\n\n  const deleteCourse = async (courseId) => {\n    try {\n      const response = await fetch(`http://127.0.0.1:8000/courses/${courseId}`, {\n        method: \"DELETE\",\n      });\n\n      if (!response.ok) {\n        throw new Error(\"Failed to delete course\");\n      }\n\n      setCourses(courses.filter((course) => course._id !== courseId));\n      alert(\"Course deleted successfully.\");\n    } catch (err) {\n      alert(`Error: ${err.message}`);\n    }\n  };\n\n  const handleEditClick = (course) => {\n    setSelectedCourse(course);\n    setEditModalOpen(true);\n  };\n\n  if (loading) {\n    return <p className=\"text-center text-lg text-blue-500\">Loading courses...</p>;\n  }\n\n  if (error) {\n    return <p className=\"text-center text-lg text-red-500\">Error: {error}</p>;\n  }\n\n  return (\n    <div className=\"p-6 space-y-6\">\n      {isModalOpen && (\n        <Modal onClose={() => setModalOpen(false)}>\n          <AddCourse setModalOpen={setModalOpen} fetchCourses={fetchCourses} />\n        </Modal>\n      )}\n      {editModalOpen && selectedCourse && (\n        <Modal onClose={() => setEditModalOpen(false)}>\n          <EditCourse\n            course={selectedCourse}\n            setModalOpen={setEditModalOpen}\n            fetchCourses={fetchCourses}\n          />\n        </Modal>\n      )}\n      <h2 className=\"text-3xl font-semibold text-center text-gray-800\">Admin - Manage Courses</h2>\n      <button\n        onClick={() => setModalOpen(true)}\n        className=\"bg-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:bg-blue-700 mb-6\"\n      >\n        Add Course\n      </button>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {courses.length > 0 ? (\n          courses.map((course) => (\n            <div\n              key={course._id}\n              className=\"bg-white p-4 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col justify-between\"\n            >\n              <div>\n                <h3 className=\"text-xl font-semibold text-gray-800\">{course.title}</h3>\n                <p className=\"text-sm text-gray-600 mt-2\">{course.description}</p>\n              </div>\n              <div className=\"mt-4 flex flex-col space-y-2\">\n                <a\n                  href={course.courselink || \"#\"}\n                  className=\"text-blue-500 hover:underline\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  View Course\n                </a>\n                <p className=\"text-sm text-gray-500\">Standard: {course.standard || \"N/A\"}</p>\n                <div className=\"flex space-x-4 mt-4\">\n                  <button\n                    onClick={() => handleEditClick(course)}\n                    className=\"bg-green-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-green-700\"\n                  >\n                    Edit\n                  </button>\n                  <button\n                    onClick={() => deleteCourse(course._id)}\n                    className=\"bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:bg-red-700\"\n                  >\n                    Delete\n                  </button>\n                </div>\n              </div>\n            </div>\n          ))\n        ) : (\n          <p className=\"text-center text-lg text-gray-500\">No courses available</p>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminCourses;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}